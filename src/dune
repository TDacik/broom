(rule
  (targets Version.ml)
  (action
    (with-stdout-to Version.ml
     (bash "echo \"let curr=\\\"%{version:bi}-`git describe --always`\\\"\n\""))))

(executable
  (name ContractGenerator)
  (public_name bi)
  (libraries CL biabd)
  (modules ContractGenerator))

(library
  (name bi)
  (public_name bi)
  (flags :standard)
  (libraries core z3 CL biabd)
  (modules :standard \ biabductor ContractGenerator test))

(executable
  (name biabductor)
  (public_name bi)
  (libraries bi)
  (modules biabductor))

(executable
  (name test)
  (public_name bi)
  (libraries core CL z3 biabd)
  (modules test))
